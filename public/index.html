<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gestoría Virtual - Solicitud</title>
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>

  <!-- ========================= -->
  <!-- GLOBAL LOADER -->
  <!-- ========================= -->
  <div id="globalLoader" class="global-loader" style="display:none;">
    <div class="spinner"></div>
    <p>Procesando imagen, por favor espera...</p>
  </div>

  <div class="main-container">
    <h2 class="title">Gestoría Virtual</h2>

    <!-- ========================= -->
    <!-- FORMULARIO PRINCIPAL -->
    <!-- ========================= -->
    <form id="mainForm">

      <!-- ========================= -->
      <!-- DATOS GENERALES -->
      <!-- ========================= -->
      <label>Nombre completo:</label>
      <input type="text" required id="inputNombre" />

      <label>CURP:</label>
      <input type="text" required id="inputCurp" />

      <label>Teléfono:</label>
      <input type="tel" required id="inputTelefono" />

      <!-- ========================= -->
      <!-- FOTO PERSONA -->
      <!-- ========================= -->
      <h3>1. Foto de la persona</h3>
      <p>Sube una foto o tómala desde la cámara.</p>

      <div class="dual-buttons">
        <button id="btnPersonaCamera" type="button" class="btn-primary">Tomar foto</button>
        <input type="file" id="inputPersonaFile" accept="image/*" class="hidden-file">
        <button id="btnPersonaFile" type="button" class="btn-secondary">Subir archivo</button>
      </div>

      <div class="preview-box">
        <img id="previewPersona" src="" alt="Aún no hay foto" />
      </div>

      <input type="hidden" id="inputPersonaPhotoUrl" />

      <div id="personaActions" class="actions" style="display:none;">
        <button type="button" id="btnPersonaUsar" class="btn-primary small">Confirmar foto</button>
        <button type="button" id="btnPersonaCambiar" class="btn-secondary small">Cambiar</button>
      </div>


      <!-- ========================= -->
      <!-- FOTO IDENTIFICACION -->
      <!-- ========================= -->
      <h3>2. Foto de identificación</h3>
      <p>Sube una foto o tómala desde la cámara.</p>

      <div class="dual-buttons">
        <button id="btnIdCamera" type="button" class="btn-primary">Tomar foto</button>
        <input type="file" id="inputIdFile" accept="image/*" class="hidden-file">
        <button id="btnIdFile" type="button" class="btn-secondary">Subir archivo</button>
      </div>

      <div class="preview-box">
        <img id="previewId" src="" alt="Aún no hay foto" />
      </div>

      <input type="hidden" id="inputIdPhotoUrl" />

      <div id="idActions" class="actions" style="display:none;">
        <button type="button" id="btnIdUsar" class="btn-primary small">Confirmar</button>
        <button type="button" id="btnIdCambiar" class="btn-secondary small">Cambiar</button>
      </div>

      <!-- ========================= -->
      <!-- FIRMA -->
      <!-- ========================= -->
      <h3>3. Firma</h3>

      <div class="tabs">
        <button id="tabFirmaArchivo" type="button" class="tab active">Subir imagen</button>
        <button id="tabFirmaDibujar" type="button" class="tab">Dibujar</button>
      </div>

      <!-- Subir firma -->
      <div id="firmaArchivoContainer">
        <input type="file" id="inputFirmaFile" accept="image/*" />
        <div class="preview-box">
          <img id="previewFirmaArchivo" src="" alt="Aún no hay firma" />
        </div>
      </div>

      <!-- Dibujar firma -->
      <div id="firmaDibujarContainer" style="display:none;">
        <canvas id="firmaCanvas"></canvas>
        <div class="actions">
          <button type="button" id="btnFirmaClear" class="btn-secondary small">Limpiar</button>
        </div>

        <div class="preview-box">
          <img id="previewFirmaDibujada" src="" alt="Aún no hay firma" />
        </div>
      </div>

      <input type="hidden" id="inputFirmaUrl" />

      <div id="firmaActions" class="actions" style="display:none;">
        <button type="button" id="btnFirmaUsar" class="btn-primary small">Confirmar firma</button>
        <button type="button" id="btnFirmaCambiar" class="btn-secondary small">Cambiar</button>
      </div>

      <!-- ========================= -->
      <!-- BOTÓN FINAL -->
      <!-- ========================= -->
      <button type="submit" class="btn-primary full">Enviar formulario</button>
    </form>
  </div>

  <!-- ========================= -->
  <!-- MODAL CÁMARA -->
  <!-- ========================= -->
  <div id="cameraModal" class="camera-modal" style="display:none;">
    <div class="camera-box">
      <video id="cameraVideo" autoplay playsinline></video>
      <img id="cameraSilhouette" src="/silueta.png" class="silhouette-overlay">
      <div class="camera-controls">
        <button id="takePhotoBtn" type="button" class="btn-primary full">Tomar foto</button>
        <button id="closeCameraBtn" type="button" class="btn-secondary full">Cancelar</button>
      </div>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
